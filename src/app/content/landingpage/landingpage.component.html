<div class="content">
  <mat-card>
    <mat-card-title>Willkommen beim SDG-Checker!</mat-card-title>
  </mat-card>
  <mat-card>
    <mat-card-title>
      Beschreiben Sie Ihre Projektidee und nennen Sie die Projektziele<br />
      Schritt 1: Lassen Sie uns Ihre Projektziele mit den SDGs abgleichen
    </mat-card-title>
    <mat-card-content>
      <form [formGroup]="form" (ngSubmit)="submit()">
        <mat-form-field appearance="fill" style="display: unset">
          <mat-label> Projekttitel </mat-label>
          <input type="text" matInput formControlName="projectName" />
        </mat-form-field>

        <mat-form-field appearance="fill" style="display: unset">
          <mat-label>Projektbeschreibung</mat-label>
          <textarea
            cdkTextareaAutosize
            #autosize="cdkTextareaAutosize"
            cdkAutosizeMinRows="10"
            type="text"
            matInput
            formControlName="projectDescription">
          </textarea>
        </mat-form-field>

        <mat-card-actions>
          <div class="button">
            <button type="submit" (ngSubmit)="submit()" mat-stroked-button>
              Auf SDGs prüfen
            </button>
          </div>
        </mat-card-actions>
      </form>
    </mat-card-content>
  </mat-card>
  <mat-card *ngIf="this.osdgQueryProgressing && !this.detectedSDGs.size">
    <mat-spinner></mat-spinner>
  </mat-card>
  <mat-card
    *ngIf="
      !this.osdgQueryProgressing &&
      !this.detectedSDGs.size &&
      this.projectDescription
    ">
    <mat-card-title>
      Leider konnten wir keine SDGs in Ihrem Vorhaben automatisiert erkennen.
    </mat-card-title>
    <mat-card-subtitle>
      Bitte wählen Sie die SDGs aus, die zu Ihrem Projekt passen.
    </mat-card-subtitle>
  </mat-card>
  <mat-card *ngIf="this.detectedSDGs.size">
    <mat-card-title> Schritt 2: Identifizierte SDGs </mat-card-title>
    <mat-card-subtitle>
      Basierend auf Ihrer Projektbeschreibung hat unser Algorithmus
      wissenschaftliche Datenbanken durchsucht.<br />
      Unser SDG-Checker schlägt daher folgende SDGs für Ihre Projektziele
      vor.<br />
      Indem Sie die SDGs an- oder abwählen entscheiden Sie sich dafür, ob Sie
      als relevant für Ihr Projekt einschätzen.
    </mat-card-subtitle>
    <div fxLayout="row wrap" fxLayoutGap="16px grid">
      <div *ngFor="let SDG of this.detectedSDGs" class="button">
        <div *ngIf="!this.detectedSDGSelection.has(SDG)">
          <button type="button" (click)="addDetectedSDG(SDG)" mat-button>
            <mat-card>
              <mat-card-title>SDG {{ SDG }}</mat-card-title>
              <mat-card-content>
                <img
                  src="/assets/SDGs/{{ SDG }}.png"
                  alt="SDG {{ SDG }} icon"
                  width="90px"
                  height="90px" />
              </mat-card-content>
            </mat-card>
          </button>
        </div>
        <div *ngIf="this.detectedSDGSelection.has(SDG)">
          <button type="button" (click)="deleteDetectedSDG(SDG)" mat-button>
            <mat-card>
              <mat-card-title style="color: green"
                >SDG {{ SDG }}</mat-card-title
              >
              <mat-card-content>
                <img
                  src="/assets/SDGs/{{ SDG }}.png"
                  alt="SDG {{ SDG }} icon"
                  width="90px"
                  height="90px" />
              </mat-card-content>
            </mat-card>
          </button>
        </div>
      </div>
    </div>
    <mat-card-actions>
      <div *ngIf="this.detectedSDGSelection.size">
        <button type="button" (click)="submitDetectedSDGs()" mat-stroked-button>
          Auswahl übernehmen
        </button>
      </div>
    </mat-card-actions>
  </mat-card>
  <mat-card *ngIf="this.extrapolatedSDGGains.size">
    <mat-card-title> Schritt 3: SDG-Wirkungszusammenhänge </mat-card-title>
    <mat-card-subtitle>
      Rundum nachhaltig: SDGS können sich gegenseitig beeinflussen.<br />
      Folgende SDGs könnten daher in Beziehung zu den bereits bestätigten SDGs
      stehen.<br />
      Informieren Sie sich zu den verschiedenen Zielen und entscheiden Sie, ob
      diese tatsächlich relevant für Ihr Projekt sind, in dem Sie diese an- oder
      abwählen.
    </mat-card-subtitle>
    <div fxLayout="row wrap" fxLayoutGap="16px grid">
      <div *ngFor="let SDG of this.extrapolatedSDGGains">
        <div *ngIf="!this.extrapolatedSDGGainsSelection.has(SDG)">
          <button
            type="button"
            (click)="addExtrapolatedSDGGain(SDG)"
            mat-button>
            <mat-card>
              <mat-card-title>SDG {{ SDG }}</mat-card-title>
              <mat-card-content>
                <img
                  src="/assets/SDGs/{{ SDG }}.png"
                  alt="SDG {{ SDG }} icon"
                  width="90px"
                  height="90px" />
              </mat-card-content>
            </mat-card>
          </button>
        </div>
        <div *ngIf="this.extrapolatedSDGGainsSelection.has(SDG)">
          <button
            type="button"
            (click)="deleteExtrapolatedSDGGain(SDG)"
            mat-button>
            <mat-card>
              <mat-card-title style="color: green"
                >SDG {{ SDG }}</mat-card-title
              >
              <mat-card-content>
                <img
                  src="/assets/SDGs/{{ SDG }}.png"
                  alt="SDG {{ SDG }} icon"
                  width="90px"
                  height="90px" />
              </mat-card-content>
            </mat-card>
          </button>
        </div>
      </div>
    </div>
  </mat-card>

  <mat-card *ngIf="this.extrapolatedSDGGainsSelection.size">
    <mat-card-title
      >Schritt 4: Ergänzende Beschreibungen für die neuen
      SDG-Projektziele</mat-card-title
    >
    <mat-card-subtitle>
      Diese Zielbeschreibungen ergänzen Ihre anfängliche Projektbeschreibung.
      Erläutern Sie jeweils wie Ihre Projektziele die ausgesuchten SDGs stärken
      werden.</mat-card-subtitle
    >
    <mat-card-content>
      <form
        [formGroup]="SDGGainsExplanationsForm"
        (ngSubmit)="submitSDGGainsExplanations()">
        <div style="display: flex" *ngFor="let SDG of this.getSDGSelection()">
          <img
            class="sdg-icon-list"
            src="/assets/SDGs/{{ SDG }}.png"
            alt="SDG {{ SDG }} icon"
            height="90px"
            width="90px" />
          <mat-form-field appearance="fill">
            <mat-label
              >Bitte erklären Sie hier, mit welchem Projektziel das SDG
              {{ SDG }} gestärkt wird</mat-label
            >
            <textarea
              cdkTextareaAutosize
              #autosize="cdkTextareaAutosize"
              cdkAutosizeMinRows="3"
              type="text"
              matInput
              formControlName="SDG{{ SDG }}">
            </textarea>
          </mat-form-field>
        </div>
        <mat-card-actions>
          <div class="button">
            <button
              type="submit"
              (ngSubmit)="submitSDGGainsExplanations()"
              mat-stroked-button>
              Ziele übernehmen
            </button>
          </div>
        </mat-card-actions>
      </form>
    </mat-card-content>
  </mat-card>

  <mat-card *ngIf="this.SDGGainsExplained">
    <mat-card-title>Schritt 5: Keine Verletzung von SDGs</mat-card-title>
    <mat-card-subtitle>
      SDGs dürfen einander nicht verletzen. Unser Algorithmus hat basierend auf
      Ihren Informationen folgende SDGS als potentiell gefährdet
      identifiziert.<br />
      Informiere Sie sich zu den Zusammenhängen und wählen Sie relevante SDGs
      bewusst ab oder an.
    </mat-card-subtitle>
    <div fxLayout="row wrap" fxLayoutGap="16px grid">
      <div *ngFor="let SDG of this.extrapolatedSDGHarms">
        <div *ngIf="!this.extrapolatedSDGHarmsSelection.has(SDG)">
          <button
            type="button"
            (click)="addExtrapolatedSDGHarm(SDG)"
            mat-button>
            <mat-card>
              <mat-card-title>SDG {{ SDG }}</mat-card-title>
              <mat-card-content>
                <img
                  src="/assets/SDGs/{{ SDG }}.png"
                  alt="SDG {{ SDG }} icon"
                  width="90px"
                  height="90px" />
              </mat-card-content>
            </mat-card>
          </button>
        </div>
        <div *ngIf="this.extrapolatedSDGHarmsSelection.has(SDG)">
          <button
            type="button"
            (click)="deleteExtrapolatedSDGHarm(SDG)"
            mat-button>
            <mat-card>
              <mat-card-title style="color: red">SDG {{ SDG }}</mat-card-title>
              <mat-card-content>
                <img
                  src="/assets/SDGs/{{ SDG }}.png"
                  alt="SDG {{ SDG }} icon"
                  width="90px"
                  height="90px" />
              </mat-card-content>
            </mat-card>
          </button>
        </div>
      </div>
    </div>
  </mat-card>

  <mat-card *ngIf="this.extrapolatedSDGHarmsSelection.size">
    <mat-card-title>Schritt 6: SDGs Schutzmaßnahmen </mat-card-title>
    <mat-card-subtitle>
      Ihre Beschreibung der Schutzmaßnahmen ergänzt Ihre anfängliche
      Projektbeschreibung. Erläutern Sie jeweils wie Sie die Verletzung des
      ausgesuchten SDGs verhindern.</mat-card-subtitle
    >
    <mat-card-content>
      <form
        [formGroup]="SDGHarmsExplanationsForm"
        (ngSubmit)="submitSDGHarmsExplanations()">
        <div
          style="display: flex"
          *ngFor="let SDG of this.extrapolatedSDGHarmsSelection">
          <img
            class="sdg-icon-list"
            src="/assets/SDGs/{{ SDG }}.png"
            alt="SDG {{ SDG }} icon"
            height="90px"
            width="90px" />
          <mat-form-field appearance="fill">
            <mat-label
              >Erklären Sie hier die Maßnahmen mit denen Sie eine Verletzung des
              SDG {{ SDG }} verhindern</mat-label
            >
            <textarea
              cdkTextareaAutosize
              #autosize="cdkTextareaAutosize"
              cdkAutosizeMinRows="3"
              type="text"
              matInput
              formControlName="SDG{{ SDG }}">
            </textarea>
          </mat-form-field>
        </div>
        <mat-card-actions>
          <div class="button">
            <button
              type="submit"
              (ngSubmit)="submitSDGHarmsExplanations()"
              mat-stroked-button>
              Maßnahmen übernehmen
            </button>
          </div>
        </mat-card-actions>
      </form>
    </mat-card-content>
  </mat-card>

  <mat-card *ngIf="this.SDGHarmsExplained">
    <mat-card-title
      >Check! Sie haben Ihr Projekt rundum nachhaltig konzipiert</mat-card-title
    >
    <mat-card>
      <mat-card-title> Ihre aktuelle Projektbeschreibung </mat-card-title>
      <mat-card-subtitle>
        {{ this.projectName }}
      </mat-card-subtitle>
      <mat-card-content>
        {{ this.projectDescription }}
      </mat-card-content>
    </mat-card>
    <mat-card>
      <mat-card-title>Diese SDGs sind Projektziele</mat-card-title>
      <div style="display: flex" *ngFor="let SDG of this.getSDGSelection()">
        <img
          class="sdg-icon-list"
          src="/assets/SDGs/{{ SDG }}.png"
          alt="SDG {{ SDG }} icon"
          height="90px"
          width="90px" />
        {{ this.SDGGainsExplanations[SDG] }}
      </div>
    </mat-card>
    <mat-card>
      <mat-card-title
        >Diese SDGs werden durch das Projekt nicht gefährdet</mat-card-title
      >
      <div
        style="display: flex"
        *ngFor="let SDG of this.extrapolatedSDGHarmsSelection">
        <img
          class="sdg-icon-list"
          src="/assets/SDGs/{{ SDG }}.png"
          alt="SDG {{ SDG }} icon"
          height="90px"
          width="90px" />
        {{ this.SDGHarmsExplanations[SDG] }}
      </div>
    </mat-card>
    <mat-card>
      <mat-card-title
        >Ihre rundum nachhaltigen Projektziele greifbarer machen - mit
        Indikatoren</mat-card-title
      >
      <mat-card-subtitle
        >Um die Qualität Ihrer Projektidee im Antragsprozess zu erhöhen, ist die
        Formulierung von SMART-en Indikatoren relevant.<br />
        Hier werden Beispiele für Indikatoren vorgeschlagen, die den Erfolg
        Ihrer Projektziele greifbar machen.
      </mat-card-subtitle>

      <div style="display: flex" *ngFor="let SDG of this.getSDGSelection()">
        <img
          class="sdg-icon-list"
          src="/assets/SDGs/{{ SDG }}.png"
          alt="SDG {{ SDG }} icon"
          height="90px"
          width="90px" />
        <ul>
          <li
            *ngFor="
              let SDGtext of this.indicatorsService.getIndicatorsForSDG(SDG, 3)
            ">
            {{ SDGtext }}
          </li>
        </ul>
      </div>
    </mat-card>
  </mat-card>
</div>
